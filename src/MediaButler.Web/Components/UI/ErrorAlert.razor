@namespace MediaButler.Web.Components.UI

@if (!string.IsNullOrEmpty(ErrorMessage))
{
    <div class="error-alert @AlertType.ToString().ToLower() @CssClass">
        <div class="error-icon">
            @switch (AlertType)
            {
                case AlertLevel.Error:
                    <span>❌</span>
                    break;
                case AlertLevel.Warning:
                    <span>⚠️</span>
                    break;
                case AlertLevel.Info:
                    <span>ℹ️</span>
                    break;
            }
        </div>
        <div class="error-content">
            <div class="error-message">@ErrorMessage</div>
            @if (!string.IsNullOrEmpty(Details))
            {
                <div class="error-details">@Details</div>
            }
        </div>
        @if (ShowDismiss)
        {
            <button class="error-dismiss" @onclick="OnDismiss" type="button">
                ✕
            </button>
        }
    </div>
}

@code {
    [Parameter] public string? ErrorMessage { get; set; }
    [Parameter] public string? Details { get; set; }
    [Parameter] public AlertLevel AlertType { get; set; } = AlertLevel.Error;
    [Parameter] public bool ShowDismiss { get; set; } = true;
    [Parameter] public string CssClass { get; set; } = "";
    [Parameter] public EventCallback OnDismissed { get; set; }

    private async Task OnDismiss()
    {
        await OnDismissed.InvokeAsync();
    }

    public enum AlertLevel
    {
        Error,
        Warning, 
        Info
    }
}

<style>
    .error-alert {
        display: flex;
        align-items: flex-start;
        gap: 0.75rem;
        padding: 1rem;
        border-radius: 0.5rem;
        margin-bottom: 1rem;
        border: 1px solid;
    }

    .error-alert.error {
        background-color: #fef2f2;
        border-color: #fca5a5;
        color: #991b1b;
    }

    .error-alert.warning {
        background-color: #fffbeb;
        border-color: #fcd34d;
        color: #92400e;
    }

    .error-alert.info {
        background-color: #eff6ff;
        border-color: #93c5fd;
        color: #1e40af;
    }

    .error-icon {
        flex-shrink: 0;
        font-size: 1rem;
    }

    .error-content {
        flex: 1;
    }

    .error-message {
        font-weight: 500;
        margin-bottom: 0.25rem;
    }

    .error-details {
        font-size: 0.875rem;
        opacity: 0.8;
    }

    .error-dismiss {
        background: none;
        border: none;
        color: inherit;
        cursor: pointer;
        font-size: 1.25rem;
        padding: 0;
        flex-shrink: 0;
        opacity: 0.6;
    }

    .error-dismiss:hover {
        opacity: 1;
    }
</style>